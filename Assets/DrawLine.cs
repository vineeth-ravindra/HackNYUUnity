using System.Collections; using System.Collections.Generic; using UnityEngine;  public class DrawLine : MonoBehaviour { 	private LineRenderer lineRenderer; 	private float counter; 	private float dist; 	public Transform source; 	public Transform destination; 	public GameObject srcsphere,dstsphere; 	public TextMesh text, textformula, textcoordinates; 	public float lineDrawSpeed = 6f; 	public string action; 	public string distx1; 	public string disty1; 	public string distz1; 	public string distx2; 	public string disty2; 	public string distz2;  	void Start(){ 		lineRenderer = GetComponent<LineRenderer> (); 		lineRenderer.SetPosition(0,source.position); 		lineRenderer.SetWidth(.1f,.1f); 		dist = Vector3.Distance(source.position,destination.position); 		srcsphere = GameObject.Find("Source"); 		dstsphere = GameObject.Find("Destination"); 		srcsphere.transform.localScale -= new Vector3(0.8f, 0.8f, 0.8f); 		dstsphere.transform.localScale -= new Vector3(0.8f, 0.8f, 0.8f); 		/*WWW www = new WWW("http://ec2-52-40-81-66.us-west-2.compute.amazonaws.com:3030/api/action"); 		yield return www; 		action = www.text; 		WWW www1 = new WWW("http://ec2-52-40-81-66.us-west-2.compute.amazonaws.com:3030/api/x1"); 		yield return www1; 		distx1 = www1.text; 		WWW www2 = new WWW("http://ec2-52-40-81-66.us-west-2.compute.amazonaws.com:3030/api/y1"); 		yield return www2; 		disty1 = www2.text; 		WWW www3 = new WWW("http://ec2-52-40-81-66.us-west-2.compute.amazonaws.com:3030/api/z1"); 		yield return www3; 		distz1 = www3.text; 		WWW www4 = new WWW("http://ec2-52-40-81-66.us-west-2.compute.amazonaws.com:3030/api/x2"); 		yield return www4; 		distx2 = www4.text; 		WWW www5 = new WWW("http://ec2-52-40-81-66.us-west-2.compute.amazonaws.com:3030/api/y2"); 		yield return www5; 		disty2 = www5.text; 		WWW www6 = new WWW("http://ec2-52-40-81-66.us-west-2.compute.amazonaws.com:3030/api/z2"); 		yield return www6; 		distz2 = www6.text; 		print(/*action,distx1,disty1,distz1,distx2,disty2,distz2);*/ 		StartCoroutine(repeatAPIrequest()); 		text = GameObject.Find("Distance").GetComponent<TextMesh>(); 		textformula = GameObject.Find("Formula").GetComponent<TextMesh>(); 		textcoordinates = GameObject.Find("Coordinates").GetComponent<TextMesh>(); 		text.text = string.Concat (dist.ToString (),"units"); 		textformula.text = "Formula"; 		textcoordinates.text = "Coordinates"; 	}  	IEnumerator repeatAPIrequest(){ 		WWW www = new WWW("http://ec2-52-40-81-66.us-west-2.compute.amazonaws.com:3030/api/action"); 		yield return www; 		action = www.text; 		WWW www1 = new WWW("http://ec2-52-40-81-66.us-west-2.compute.amazonaws.com:3030/api/x1"); 		yield return www1; 		distx1 = www1.text; 		WWW www2 = new WWW("http://ec2-52-40-81-66.us-west-2.compute.amazonaws.com:3030/api/y1"); 		yield return www2; 		disty1 = www2.text; 		WWW www3 = new WWW("http://ec2-52-40-81-66.us-west-2.compute.amazonaws.com:3030/api/z1"); 		yield return www3; 		distz1 = www3.text; 		WWW www4 = new WWW("http://ec2-52-40-81-66.us-west-2.compute.amazonaws.com:3030/api/x2"); 		yield return www4; 		distx2 = www4.text; 		WWW www5 = new WWW("http://ec2-52-40-81-66.us-west-2.compute.amazonaws.com:3030/api/y2"); 		yield return www5; 		disty2 = www5.text; 		WWW www6 = new WWW("http://ec2-52-40-81-66.us-west-2.compute.amazonaws.com:3030/api/z2"); 		yield return www6; 		distz2 = www6.text; 	}   	void Update(){  		if(counter<dist) 		{ 			counter += .1f/lineDrawSpeed;  			float x = Mathf.Lerp(0,dist,counter);  			Vector3 pointA = source.position; 			Vector3 pointB = destination.position;  			Vector3 pointAlongLine = x * Vector3.Normalize(pointB-pointA) + pointA;  			lineRenderer.SetPosition(1,pointAlongLine); 			//System.Console.WriteLine(counter);  			//System.Console.WriteLine (counter);  		} 		else if(counter>=dist) 		{ 			counter = .0f; 			source.position = new Vector3(float.Parse(distx1),float.Parse(disty1),float.Parse(distz1)); 			//print (source.position); 			lineRenderer.SetPosition(0,source.position); 			destination.position = new Vector3(float.Parse(distx2),float.Parse(disty2),float.Parse(distz2)); 			dist = Vector3.Distance(source.position,destination.position); 			text.text = string.Concat (dist.ToString (),"units"); 			textcoordinates.text = "(" + distx1.ToString () + "," + disty1.ToString () + "," + distz1.ToString () + ")" + " <-> " + "(" + distx2.ToString () + "," + disty2.ToString () + "," + distz2.ToString () + ")"; 			textformula.text = "(x2-x1)^2 + (y2-y1)^2)"; 			StartCoroutine(repeatAPIrequest()); 		}  	} } 